<html>
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <script src="/socket.io/socket.io.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/normalizr@3.6.1/dist/normalizr.browser.min.js"></script>
    <script src="./main.js"></script>
   	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<style>
    .failLogin{
			border-color: red!important;
		}
        .displayNone{
            display: none;
        }
        .displayOn{
            display: initial;
        }
</style>
<body>
  
    <div class="container mt-3" id="container">
    <div class="jumbotron" id="contenedor">
      <h1 style="color:blue">Login de usuario</h1>
      <br>
            <form id="formLogin">
              <div class="form-group">
               <label for="name"><b>Ingrese su nombre</b></label> 
               <input id="username" class="form-control" type="text" name="username">
              </div>
              <div class="form-group">
               <label for="name"><b>Ingrese su contrase√±a</b></label> 
               <input id="password" class="form-control" type="password" name="password">
              </div>
               <button class="btn btn-success mt-3 mb-5">Enviar</button>
            </form>
      <form action="/register" method="get">
      <button class="btn btn-success mt-3 mb-5">Registrar un nuevo usuario</button>
      </form>
    </div>
    
  </div>
   <script>
   $(document).ready(function () {
  $("#formLogin").submit(function (event) {
    event.preventDefault();
    var formData = {
      username: $("#username").val(),
      password: $("#password").val(),
    };

  axios.post('/login',formData)
	  .then((response) => {
		if(response.data == 'login failed'){
           $("#password").addClass('failLogin')
           $("#username").addClass('failLogin')
		}else{
            $("#contenedor").addClass('displayNone')
			 $("#container").append(`
			<div class="jumbotron" id="contenedor">
      <h1 style="color:blue">login exitoso!</h1>
<form action="/" method="get">
      <button class="btn btn-success mt-3 mb-5">Volver</button>
      </form>
    </div>`)
		}
        })
        .catch((err) => {
            $("#contenedor").addClass('displayNone')
			 $("#container").append(`
			<div class="jumbotron" id="contenedor">
      <h1 style="color:blue">Error de servidor</h1>
<form action="/" method="get">
      <button class="btn btn-success mt-3 mb-5">Volver</button>
      </form>
    </div>`)
        });
  });
});
  </script>
</body>



</html>